# 🤖 机器人局部路径规划 - 人工势场法 (APF) 教学演示



**Robot Artificial Potential Field (APF) Visualization Demo**

本项目是一个基于 Python 和 Matplotlib 开发的**人工势场法 (Artificial Potential Field)** 算法可视化演示程序。专为《智能机器人技术》或《自动控制原理》课程设计，旨在通过直观的动画，展示 APF 算法的原理、固有缺陷（局部极小值）及其改进策略。

该项目使用 **[Pixi](https://pixi.sh/)** 进行依赖管理和环境隔离，支持一键打包为独立的 `.exe` 文件，方便在无 Python 环境的教室电脑上进行演示。

------



## ✨ 功能特性



- **交互式 GUI 界面**：通过底部按钮实时切换不同的仿真场景。
- **动态轨迹绘制**：实时显示机器人的运动路径、障碍物位置及斥力场范围。
- **三大核心场景**：
  1. **基础避障 (Basic)**：展示 APF 算法在稀疏障碍物环境下的平滑避障能力。
  2. **局部极小值陷阱 (Trap)**：展示 APF 的经典缺陷——在 U 型障碍物中陷入死锁（Local Minima）。
  3. **智能逃逸策略 (Escape)**：展示改进型算法，通过**死锁检测**与**切向机动 (Tangential Escape)** 自动跳出陷阱。
- **零配置运行**：基于 Pixi 的环境管理，克隆即运行。
- **便携式演示**：支持打包成单文件 EXE，即插即用。

------



## 🛠️ 快速开始 (开发与运行)



本项目依赖 **Pixi** 进行包管理。请确保已安装 Pixi。



### 1. 初始化环境并运行



在项目根目录下，打开终端执行：

Bash

```
pixi run start
```

> Pixi 会自动创建隔离的 Python 环境，安装 `numpy` 和 `matplotlib`，并启动仿真窗口。

------



## 📦 如何打包 (生成 EXE)



为了在没有 Python 环境的教室主机上演示，您可以将项目打包为独立的可执行文件。

在终端执行：

Bash

```
pixi run build
```

- 打包过程通常需要 30-60 秒。
- 完成后，请查看生成的 **`dist/`** 文件夹。
- 其中的 **`APF_Demonstration.exe`** 即为最终成品，可拷贝到 U 盘带走。

------



## 🎓 演示场景说明



程序启动后，界面底部包含三个按钮，分别对应教学中的三个关键知识点：



### 🟢 场景 1: Basic (基础避障)



- **教学点**：势场法的基本原理（引力+斥力）。
- **现象**：机器人受目标点引力吸引，遇到障碍物时受斥力排斥，沿合力方向平滑绕行。
- **结论**：算法计算简单，路径平滑，适合实时控制。



### 🔴 场景 2: Trap (局部极小值/死锁)



- **教学点**：APF 的数学局限性。
- **现象**：机器人冲入 U 型障碍物内部，引力（向前）与障碍物斥力（向后/向侧）达到平衡。机器人卡在原地或在小范围内震荡，无法到达目标。
- **结论**：传统 APF 容易陷入局部最优解。



### 🟢 场景 3: Escape (改进策略)



- **教学点**：工程上的改进方案（状态机 + 启发式规则）。
- **现象**：
  1. 机器人陷入 U 型陷阱。
  2. **死锁检测**逻辑触发（控制台输出警告）。
  3. 机器人切换到**逃逸模式**，强制施加切向力（垂直于目标方向），沿着障碍物边缘“滑”出包围圈。
  4. 脱困后恢复正常导航，成功到达终点。

------



## 📂 项目结构



Plaintext

```
apf_demo/
├── main.py           # 核心仿真代码 (含算法逻辑与GUI实现)
├── pixi.toml         # Pixi 配置文件 (依赖定义与任务脚本)
├── pixi.lock         # 环境版本锁定文件 (保证复现性)
├── .gitignore        # Git 忽略规则
├── README.md         # 项目说明文档
└── dist/             # (运行打包命令后生成) 存放最终 EXE 文件
```

------



## 📝 算法参数 (可在 `main.py` 中调整)



如果您需要调整演示效果，可以修改 `APF_Robot` 类的初始化参数：

- `k_att`: 引力增益系数 (建议范围: 2.0 - 5.0)
- `k_rep`: 斥力增益系数 (建议范围: 50.0 - 150.0)
- `rr`: 斥力影响半径 (影响障碍物周围的红色虚线范围)

------



## 🤝 贡献与版权



Designed for Educational Purpose.

Feel free to use this in your classroom or project.